{"ast":null,"code":"/**\n * Utilities for reformatting web3 outputs\n */\nconst BigNumber = require(\"bignumber.js/bignumber\");\nconst web3Utils = require(\"web3-utils\");\n\n/**\n * Converts from string to other number format\n * @param  {String} val    number string returned by web3\n * @param  {String} format name of format to convert to\n * @return {Object|String} converted value\n */\nconst _convertNumber = function (val, format) {\n  const badFormatMsg = `Attempting to convert to unknown number format: ${format}`;\n  switch (format) {\n    case \"BigNumber\":\n      return new BigNumber(val);\n    case \"BN\":\n      return web3Utils.toBN(val);\n    case \"String\":\n      return val;\n    case \"BigInt\":\n      return BigInt(val);\n    default:\n      throw new Error(badFormatMsg);\n  }\n};\n\n/**\n * Converts arrays of number strings to other number formats\n * @param  {String[]} arr       number string array returned by web3\n * @param  {String}   format    name of format to convert to\n * @return {Object[]|String[]}  array of converted values\n */\nconst _convertNumberArray = function (arr, format) {\n  let depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  if (depth == 0) return arr.map(item => _convertNumber(item, format));\n  // arr is nested\n  return arr.map(item => _convertNumberArray(item, format, depth - 1));\n};\n\n/**\n * Reformats numbers in the result/result-object of a web3 call.\n * Possible forms of `result` are:\n *   - object (with index keys and optionally, named keys)\n *   - array\n *   - single primitive\n * @param  {String|Object|Array} result      web3 call result\n * @param  {Array}               abiSegment  event params OR .call outputs\n * @return {String|Object|Array} reformatted result\n */\nconst numbers = function (result, abiSegment) {\n  const format = this.numberFormat;\n  abiSegment.forEach((output, i) => {\n    // output is a number type (uint || int);\n    if (output.type.includes(\"int\")) {\n      // output is an array type\n      if (output.type.includes(\"[\")) {\n        // larger than zero if nested array\n        let depth = output.type.split(\"[\").length - 2;\n\n        // result is array\n        if (Array.isArray(result)) {\n          result = _convertNumberArray(result, format, depth);\n\n          // result is object\n        } else {\n          // output has name\n          if (output.name.length) {\n            result[output.name] = _convertNumberArray(result[output.name], format, depth);\n          }\n          // output will always have an index key\n          result[i] = _convertNumberArray(result[i], format, depth);\n        }\n        //\n      } else if (typeof result === \"object\") {\n        // output has name\n        if (output.name.length) {\n          result[output.name] = _convertNumber(result[output.name], format);\n        }\n\n        // output will always have an index key\n        result[i] = _convertNumber(result[i], format);\n      } else {\n        result = _convertNumber(result, format);\n      }\n    }\n  });\n  return result;\n};\nmodule.exports = {\n  numbers: numbers\n};","map":{"version":3,"names":["BigNumber","require","web3Utils","_convertNumber","val","format","badFormatMsg","toBN","BigInt","Error","_convertNumberArray","arr","depth","arguments","length","undefined","map","item","numbers","result","abiSegment","numberFormat","forEach","output","i","type","includes","split","Array","isArray","name","module","exports"],"sources":["/Users/karimelbarbary/Desktop/test4/devote/node_modules/@truffle/contract/lib/reformat.js"],"sourcesContent":["/**\n * Utilities for reformatting web3 outputs\n */\nconst BigNumber = require(\"bignumber.js/bignumber\");\nconst web3Utils = require(\"web3-utils\");\n\n/**\n * Converts from string to other number format\n * @param  {String} val    number string returned by web3\n * @param  {String} format name of format to convert to\n * @return {Object|String} converted value\n */\nconst _convertNumber = function(val, format) {\n  const badFormatMsg = `Attempting to convert to unknown number format: ${format}`;\n\n  switch (format) {\n    case \"BigNumber\":\n      return new BigNumber(val);\n    case \"BN\":\n      return web3Utils.toBN(val);\n    case \"String\":\n      return val;\n    case \"BigInt\":\n      return BigInt(val);\n    default:\n      throw new Error(badFormatMsg);\n  }\n};\n\n/**\n * Converts arrays of number strings to other number formats\n * @param  {String[]} arr       number string array returned by web3\n * @param  {String}   format    name of format to convert to\n * @return {Object[]|String[]}  array of converted values\n */\nconst _convertNumberArray = function(arr, format, depth = 0) {\n  if (depth == 0) return arr.map(item => _convertNumber(item, format));\n  // arr is nested\n  return arr.map(item => _convertNumberArray(item, format, depth - 1));\n};\n\n/**\n * Reformats numbers in the result/result-object of a web3 call.\n * Possible forms of `result` are:\n *   - object (with index keys and optionally, named keys)\n *   - array\n *   - single primitive\n * @param  {String|Object|Array} result      web3 call result\n * @param  {Array}               abiSegment  event params OR .call outputs\n * @return {String|Object|Array} reformatted result\n */\nconst numbers = function(result, abiSegment) {\n  const format = this.numberFormat;\n\n  abiSegment.forEach((output, i) => {\n    // output is a number type (uint || int);\n    if (output.type.includes(\"int\")) {\n      // output is an array type\n      if (output.type.includes(\"[\")) {\n        // larger than zero if nested array\n        let depth = output.type.split(\"[\").length - 2;\n\n        // result is array\n        if (Array.isArray(result)) {\n          result = _convertNumberArray(result, format, depth);\n\n          // result is object\n        } else {\n          // output has name\n          if (output.name.length) {\n            result[output.name] = _convertNumberArray(\n              result[output.name],\n              format,\n              depth\n            );\n          }\n          // output will always have an index key\n          result[i] = _convertNumberArray(result[i], format, depth);\n        }\n        //\n      } else if (typeof result === \"object\") {\n        // output has name\n        if (output.name.length) {\n          result[output.name] = _convertNumber(result[output.name], format);\n        }\n\n        // output will always have an index key\n        result[i] = _convertNumber(result[i], format);\n      } else {\n        result = _convertNumber(result, format);\n      }\n    }\n  });\n  return result;\n};\n\nmodule.exports = {\n  numbers: numbers\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}