{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.scheduledModelRun = exports.asyncModelRun = exports.modelRun = void 0;\nconst ScheduledCommand_1 = require(\"./commands/ScheduledCommand\");\nconst genericModelRun = (s, cmds, initialValue, runCmd, then) => {\n  return s.then(o => {\n    const {\n      model,\n      real\n    } = o;\n    let state = initialValue;\n    for (const c of cmds) {\n      state = then(state, () => {\n        return runCmd(c, model, real);\n      });\n    }\n    return state;\n  });\n};\nconst internalModelRun = (s, cmds) => {\n  const then = (_p, c) => c();\n  const setupProducer = {\n    then: fun => {\n      fun(s());\n      return undefined;\n    }\n  };\n  const runSync = (cmd, m, r) => {\n    if (cmd.check(m)) cmd.run(m, r);\n    return undefined;\n  };\n  return genericModelRun(setupProducer, cmds, undefined, runSync, then);\n};\nconst isAsyncSetup = s => {\n  return typeof s.then === 'function';\n};\nconst internalAsyncModelRun = async function (s, cmds) {\n  let defaultPromise = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Promise.resolve();\n  const then = (p, c) => p.then(c);\n  const setupProducer = {\n    then: fun => {\n      const out = s();\n      if (isAsyncSetup(out)) return out.then(fun);else return fun(out);\n    }\n  };\n  const runAsync = async (cmd, m, r) => {\n    if (await cmd.check(m)) await cmd.run(m, r);\n  };\n  return await genericModelRun(setupProducer, cmds, defaultPromise, runAsync, then);\n};\nfunction modelRun(s, cmds) {\n  internalModelRun(s, cmds);\n}\nexports.modelRun = modelRun;\nasync function asyncModelRun(s, cmds) {\n  await internalAsyncModelRun(s, cmds);\n}\nexports.asyncModelRun = asyncModelRun;\nasync function scheduledModelRun(scheduler, s, cmds) {\n  const scheduledCommands = (0, ScheduledCommand_1.scheduleCommands)(scheduler, cmds);\n  const out = internalAsyncModelRun(s, scheduledCommands, scheduler.schedule(Promise.resolve(), 'startModel'));\n  await scheduler.waitAll();\n  await out;\n}\nexports.scheduledModelRun = scheduledModelRun;","map":{"version":3,"names":["Object","defineProperty","exports","value","scheduledModelRun","asyncModelRun","modelRun","ScheduledCommand_1","require","genericModelRun","s","cmds","initialValue","runCmd","then","o","model","real","state","c","internalModelRun","_p","setupProducer","fun","undefined","runSync","cmd","m","r","check","run","isAsyncSetup","internalAsyncModelRun","defaultPromise","arguments","length","Promise","resolve","p","out","runAsync","scheduler","scheduledCommands","scheduleCommands","schedule","waitAll"],"sources":["/Users/karimelbarbary/Desktop/test4/devote/node_modules/fast-check/lib/check/model/ModelRunner.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scheduledModelRun = exports.asyncModelRun = exports.modelRun = void 0;\nconst ScheduledCommand_1 = require(\"./commands/ScheduledCommand\");\nconst genericModelRun = (s, cmds, initialValue, runCmd, then) => {\n    return s.then((o) => {\n        const { model, real } = o;\n        let state = initialValue;\n        for (const c of cmds) {\n            state = then(state, () => {\n                return runCmd(c, model, real);\n            });\n        }\n        return state;\n    });\n};\nconst internalModelRun = (s, cmds) => {\n    const then = (_p, c) => c();\n    const setupProducer = {\n        then: (fun) => {\n            fun(s());\n            return undefined;\n        },\n    };\n    const runSync = (cmd, m, r) => {\n        if (cmd.check(m))\n            cmd.run(m, r);\n        return undefined;\n    };\n    return genericModelRun(setupProducer, cmds, undefined, runSync, then);\n};\nconst isAsyncSetup = (s) => {\n    return typeof s.then === 'function';\n};\nconst internalAsyncModelRun = async (s, cmds, defaultPromise = Promise.resolve()) => {\n    const then = (p, c) => p.then(c);\n    const setupProducer = {\n        then: (fun) => {\n            const out = s();\n            if (isAsyncSetup(out))\n                return out.then(fun);\n            else\n                return fun(out);\n        },\n    };\n    const runAsync = async (cmd, m, r) => {\n        if (await cmd.check(m))\n            await cmd.run(m, r);\n    };\n    return await genericModelRun(setupProducer, cmds, defaultPromise, runAsync, then);\n};\nfunction modelRun(s, cmds) {\n    internalModelRun(s, cmds);\n}\nexports.modelRun = modelRun;\nasync function asyncModelRun(s, cmds) {\n    await internalAsyncModelRun(s, cmds);\n}\nexports.asyncModelRun = asyncModelRun;\nasync function scheduledModelRun(scheduler, s, cmds) {\n    const scheduledCommands = (0, ScheduledCommand_1.scheduleCommands)(scheduler, cmds);\n    const out = internalAsyncModelRun(s, scheduledCommands, scheduler.schedule(Promise.resolve(), 'startModel'));\n    await scheduler.waitAll();\n    await out;\n}\nexports.scheduledModelRun = scheduledModelRun;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,iBAAiB,GAAGF,OAAO,CAACG,aAAa,GAAGH,OAAO,CAACI,QAAQ,GAAG,KAAK,CAAC;AAC7E,MAAMC,kBAAkB,GAAGC,OAAO,CAAC,6BAA6B,CAAC;AACjE,MAAMC,eAAe,GAAGA,CAACC,CAAC,EAAEC,IAAI,EAAEC,YAAY,EAAEC,MAAM,EAAEC,IAAI,KAAK;EAC7D,OAAOJ,CAAC,CAACI,IAAI,CAAEC,CAAC,IAAK;IACjB,MAAM;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAGF,CAAC;IACzB,IAAIG,KAAK,GAAGN,YAAY;IACxB,KAAK,MAAMO,CAAC,IAAIR,IAAI,EAAE;MAClBO,KAAK,GAAGJ,IAAI,CAACI,KAAK,EAAE,MAAM;QACtB,OAAOL,MAAM,CAACM,CAAC,EAAEH,KAAK,EAAEC,IAAI,CAAC;MACjC,CAAC,CAAC;IACN;IACA,OAAOC,KAAK;EAChB,CAAC,CAAC;AACN,CAAC;AACD,MAAME,gBAAgB,GAAGA,CAACV,CAAC,EAAEC,IAAI,KAAK;EAClC,MAAMG,IAAI,GAAGA,CAACO,EAAE,EAAEF,CAAC,KAAKA,CAAC,CAAC,CAAC;EAC3B,MAAMG,aAAa,GAAG;IAClBR,IAAI,EAAGS,GAAG,IAAK;MACXA,GAAG,CAACb,CAAC,CAAC,CAAC,CAAC;MACR,OAAOc,SAAS;IACpB;EACJ,CAAC;EACD,MAAMC,OAAO,GAAGA,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAK;IAC3B,IAAIF,GAAG,CAACG,KAAK,CAACF,CAAC,CAAC,EACZD,GAAG,CAACI,GAAG,CAACH,CAAC,EAAEC,CAAC,CAAC;IACjB,OAAOJ,SAAS;EACpB,CAAC;EACD,OAAOf,eAAe,CAACa,aAAa,EAAEX,IAAI,EAAEa,SAAS,EAAEC,OAAO,EAAEX,IAAI,CAAC;AACzE,CAAC;AACD,MAAMiB,YAAY,GAAIrB,CAAC,IAAK;EACxB,OAAO,OAAOA,CAAC,CAACI,IAAI,KAAK,UAAU;AACvC,CAAC;AACD,MAAMkB,qBAAqB,GAAG,eAAAA,CAAOtB,CAAC,EAAEC,IAAI,EAAyC;EAAA,IAAvCsB,cAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAV,SAAA,GAAAU,SAAA,MAAGE,OAAO,CAACC,OAAO,CAAC,CAAC;EAC5E,MAAMvB,IAAI,GAAGA,CAACwB,CAAC,EAAEnB,CAAC,KAAKmB,CAAC,CAACxB,IAAI,CAACK,CAAC,CAAC;EAChC,MAAMG,aAAa,GAAG;IAClBR,IAAI,EAAGS,GAAG,IAAK;MACX,MAAMgB,GAAG,GAAG7B,CAAC,CAAC,CAAC;MACf,IAAIqB,YAAY,CAACQ,GAAG,CAAC,EACjB,OAAOA,GAAG,CAACzB,IAAI,CAACS,GAAG,CAAC,CAAC,KAErB,OAAOA,GAAG,CAACgB,GAAG,CAAC;IACvB;EACJ,CAAC;EACD,MAAMC,QAAQ,GAAG,MAAAA,CAAOd,GAAG,EAAEC,CAAC,EAAEC,CAAC,KAAK;IAClC,IAAI,MAAMF,GAAG,CAACG,KAAK,CAACF,CAAC,CAAC,EAClB,MAAMD,GAAG,CAACI,GAAG,CAACH,CAAC,EAAEC,CAAC,CAAC;EAC3B,CAAC;EACD,OAAO,MAAMnB,eAAe,CAACa,aAAa,EAAEX,IAAI,EAAEsB,cAAc,EAAEO,QAAQ,EAAE1B,IAAI,CAAC;AACrF,CAAC;AACD,SAASR,QAAQA,CAACI,CAAC,EAAEC,IAAI,EAAE;EACvBS,gBAAgB,CAACV,CAAC,EAAEC,IAAI,CAAC;AAC7B;AACAT,OAAO,CAACI,QAAQ,GAAGA,QAAQ;AAC3B,eAAeD,aAAaA,CAACK,CAAC,EAAEC,IAAI,EAAE;EAClC,MAAMqB,qBAAqB,CAACtB,CAAC,EAAEC,IAAI,CAAC;AACxC;AACAT,OAAO,CAACG,aAAa,GAAGA,aAAa;AACrC,eAAeD,iBAAiBA,CAACqC,SAAS,EAAE/B,CAAC,EAAEC,IAAI,EAAE;EACjD,MAAM+B,iBAAiB,GAAG,CAAC,CAAC,EAAEnC,kBAAkB,CAACoC,gBAAgB,EAAEF,SAAS,EAAE9B,IAAI,CAAC;EACnF,MAAM4B,GAAG,GAAGP,qBAAqB,CAACtB,CAAC,EAAEgC,iBAAiB,EAAED,SAAS,CAACG,QAAQ,CAACR,OAAO,CAACC,OAAO,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;EAC5G,MAAMI,SAAS,CAACI,OAAO,CAAC,CAAC;EACzB,MAAMN,GAAG;AACb;AACArC,OAAO,CAACE,iBAAiB,GAAGA,iBAAiB"},"metadata":{},"sourceType":"script","externalDependencies":[]}